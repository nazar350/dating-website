<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dating - Sign Up & Create Profile</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<div class="logo">ðŸ’• Dating</div>
<div class="auth-container">
    <h2>Sign Up & Create Profile</h2>
    <div th:if="${signupError}" th:text="${signupError}" class="error-message"></div>
    <div th:if="${passwordMismatch}" th:text="${passwordMismatch}" class="error-message"></div>
    <div th:if="${profileError}" th:text="${profileError}" class="error-message"></div>

    <form th:action="@{/auth}" method="post" th:object="${authDTO}">
        <!-- Email -->
        <label for="email">Email address</label>
        <input type="email" id="email" name="email" th:field="*{email}" required>
        <span th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="error"></span>

        <!-- Password -->
        <label for="password">Password</label>
        <input type="password" id="password" name="password" th:field="*{password}" required>
        <span th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error"></span>

        <!-- Repeat Password -->
        <label for="repeatPassword">Repeat the password</label>
        <input type="password" id="repeatPassword" name="repeatPassword" th:field="*{repeatPassword}" required>
        <span th:if="${#fields.hasErrors('repeatPassword')}" th:errors="*{repeatPassword}" class="error"></span>

        <!-- Profile Photo -->
        <label>Profile Photo</label>
        <div id="photo-preview" class="photo-preview" onclick="document.getElementById('photoPath').click();">
            <img id="preview-img" src="" alt="Preview" style="display: none; width: 100%; height: 100%; object-fit: cover;">
            <span id="photo-text">Ð’Ð¸Ð±ÐµÑ€Ñ–Ñ‚ÑŒ Ñ„Ð¾Ñ‚Ð¾</span>
        </div>
        <input type="file" id="photoPath" name="photoPath" th:field="*{photoPath}" style="display: none;" accept="image/*">
        <span th:if="${#fields.hasErrors('photoPath')}" th:errors="*{photoPath}" class="error"></span>
        <!-- Name -->
        <label for="name">Name</label>
        <input type="text" id="name" name="name" th:field="*{name}" required>
        <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="error"></span>

        <!-- Surname -->
        <label for="surname">Surname</label>
        <input type="text" id="surname" name="surname" th:field="*{surname}" required>
        <span th:if="${#fields.hasErrors('surname')}" th:errors="*{surname}" class="error"></span>

        <!-- Birthday -->
        <label for="birthday">Birthday</label>
        <input type="date" id="birthday" name="birthday" th:field="*{birthday}" required>
        <span th:if="${#fields.hasErrors('birthday')}" th:errors="*{birthday}" class="error"></span>

        <!-- Gender -->
        <label>Gender</label>
        <div>
            <button type="button" id="male" class="interest-button" data-gender="true">Male</button>
            <button type="button" id="female" class="interest-button" data-gender="false">Female</button>
            <input type="hidden" id="gender" name="gender" th:field="*{gender}">
        </div>
        <span th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}" class="error"></span>

        <!-- Interests -->
        <label>Interests</label>
        <div class="interests-container">
            <button type="button" class="interest-button" data-interest="Man">Man</button>
            <button type="button" class="interest-button" data-interest="Woman">Woman</button>
            <button type="button" class="interest-button" data-interest="Sport">Sport</button>
            <button type="button" class="interest-button" data-interest="Books">Books</button>
            <button type="button" class="interest-button" data-interest="Shopping">Shopping</button>
            <button type="button" class="interest-button" data-interest="Video games">Video games</button>
            <button type="button" class="interest-button" data-interest="Cooking">Cooking</button>
            <button type="button" class="interest-button" data-interest="Walking">Walking</button>
            <button type="button" class="interest-button" data-interest="Parties">Parties</button>
            <button type="button" class="interest-button" data-interest="Tourism">Tourism</button>
            <button type="button" class="interest-button" data-interest="Philosophy">Philosophy</button>
            <button type="button" class="interest-button" data-interest="Art">Art</button>
            <button type="button" class="interest-button" data-interest="Music">Music</button>
            <button type="button" class="interest-button" data-interest="Movies">Movies</button>
            <button type="button" class="interest-button" data-interest="Anime">Anime</button>
            <input type="hidden" id="interests" name="interests" th:field="*{interests}">
        </div>
        <span th:if="${#fields.hasErrors('interests')}" th:errors="*{interests}" class="error"></span>

        <!-- About Me -->
        <label for="aboutMe">About Me</label>
        <textarea id="aboutMe" name="aboutMe" th:field="*{aboutMe}" required></textarea>
        <span th:if="${#fields.hasErrors('aboutMe')}" th:errors="*{aboutMe}" class="error"></span>

        <!-- Phone -->
        <label for="phone">Phone</label>
        <input type="text" id="phone" name="phone" th:field="*{phone}" required>
        <span th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="error"></span>

        <!-- Submit Button -->
        <button type="submit">SAVE PROFILE</button>
    </form>
    <p>Already have an account? <a th:href="@{/login}">Log in</a></p>
</div>

<script th:src="@{/js/auth.js}" defer></script>
</body>
</html>